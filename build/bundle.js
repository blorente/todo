var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function r(){return Object.create(null)}function i(e){e.forEach(n)}function o(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function u(t,n,r){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}const s="undefined"!=typeof window;let c=s?()=>window.performance.now():()=>Date.now(),l=s?e=>requestAnimationFrame(e):e;const f=new Set;function h(e){f.forEach((t=>{t.c(e)||(f.delete(t),t.f())})),0!==f.size&&l(h)}function d(e){let t;return 0===f.size&&l(h),{promise:new Promise((n=>{f.add(t={c:e,f:n})})),abort(){f.delete(t)}}}function p(e,t){e.appendChild(t)}function y(e,t,n){e.insertBefore(t,n||null)}function v(e){e.parentNode.removeChild(e)}function m(e){return document.createElement(e)}function g(e){return document.createTextNode(e)}function b(){return g(" ")}function _(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function w(e){return function(t){return t.preventDefault(),e.call(this,t)}}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function k(e,t){e.value=null==t?"":t}const E=new Set;let P,O=0;function K(e,t,n,r,i,o,a,u=0){const s=16.666/r;let c="{\n";for(let e=0;e<=1;e+=s){const r=t+(n-t)*o(e);c+=100*e+`%{${a(r,1-r)}}\n`}const l=c+`100% {${a(n,1-n)}}\n}`,f=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(l)}_${u}`,h=e.ownerDocument;E.add(h);const d=h.__svelte_stylesheet||(h.__svelte_stylesheet=h.head.appendChild(m("style")).sheet),p=h.__svelte_rules||(h.__svelte_rules={});p[f]||(p[f]=!0,d.insertRule(`@keyframes ${f} ${l}`,d.cssRules.length));const y=e.style.animation||"";return e.style.animation=`${y?y+", ":""}${f} ${r}ms linear ${i}ms 1 both`,O+=1,f}function S(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-r.length;i&&(e.style.animation=r.join(", "),O-=i,O||l((()=>{O||(E.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),E.clear())})))}function C(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const r=getComputedStyle(e),i="none"===r.transform?"":r.transform;e.style.transform=`${i} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}function A(e){P=e}const j=[],T=[],D=[],I=[],B=Promise.resolve();let R=!1;function M(e){D.push(e)}let F=!1;const N=new Set;function $(){if(!F){F=!0;do{for(let e=0;e<j.length;e+=1){const t=j[e];A(t),q(t.$$)}for(A(null),j.length=0;T.length;)T.pop()();for(let e=0;e<D.length;e+=1){const t=D[e];N.has(t)||(N.add(t),t())}D.length=0}while(j.length);for(;I.length;)I.pop()();R=!1,F=!1,N.clear()}}function q(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(M)}}let L;function U(){return L||(L=Promise.resolve(),L.then((()=>{L=null}))),L}function V(e,t,n){e.dispatchEvent(function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(`${t?"intro":"outro"}${n}`))}const W=new Set;let z;function Y(){z={r:0,c:[],p:z}}function H(){z.r||i(z.c),z=z.p}function G(e,t){e&&e.i&&(W.delete(e),e.i(t))}function Q(e,t,n,r){if(e&&e.o){if(W.has(e))return;W.add(e),z.c.push((()=>{W.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}const X={duration:0};function J(e,t){e.f(),function(e,t){Q(e,1,1,(()=>{t.delete(e.key)}))}(e,t)}function Z(e,t,r){const{fragment:a,on_mount:u,on_destroy:s,after_update:c}=e.$$;a&&a.m(t,r),M((()=>{const t=u.map(n).filter(o);s?s.push(...t):i(t),e.$$.on_mount=[]})),c.forEach(M)}function ee(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function te(e,t){-1===e.$$.dirty[0]&&(j.push(e),R||(R=!0,B.then($)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ne(t,n,o,a,u,s,c=[-1]){const l=P;A(t);const f=n.props||{},h=t.$$={fragment:null,ctx:null,props:s,update:e,not_equal:u,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:r(),dirty:c,skip_bound:!1};let d=!1;if(h.ctx=o?o(t,f,((e,n,...r)=>{const i=r.length?r[0]:n;return h.ctx&&u(h.ctx[e],h.ctx[e]=i)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](i),d&&te(t,e)),n})):[],h.update(),d=!0,i(h.before_update),h.fragment=!!a&&a(h.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);h.fragment&&h.fragment.l(e),e.forEach(v)}else h.fragment&&h.fragment.c();n.intro&&G(t.$$.fragment),Z(t,n.target,n.anchor),$()}A(l)}class re{$destroy(){ee(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.
    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.
    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var ie=function(){return(ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function oe(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var ae="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,ue=Object.keys,se=Array.isArray;function ce(e,t){return"object"!=typeof t||ue(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||ae.Promise||(ae.Promise=Promise);var le=Object.getPrototypeOf,fe={}.hasOwnProperty;function he(e,t){return fe.call(e,t)}function de(e,t){"function"==typeof t&&(t=t(le(e))),("undefined"==typeof Reflect?ue:Reflect.ownKeys)(t).forEach((function(n){ye(e,n,t[n])}))}var pe=Object.defineProperty;function ye(e,t,n,r){pe(e,t,ce(n&&he(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function ve(e){return{from:function(t){return e.prototype=Object.create(t.prototype),ye(e.prototype,"constructor",e),{extend:de.bind(null,e.prototype)}}}}var me=Object.getOwnPropertyDescriptor;function ge(e,t){var n;return me(e,t)||(n=le(e))&&ge(n,t)}var be=[].slice;function _e(e,t,n){return be.call(e,t,n)}function we(e,t){return t(e)}function xe(e){if(!e)throw new Error("Assertion Failed")}function ke(e){ae.setImmediate?setImmediate(e):setTimeout(e,0)}function Ee(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function Pe(e,t){if(he(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=Pe(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(-1!==a){var u=e[t.substr(0,a)];return void 0===u?void 0:Pe(u,t.substr(a+1))}}function Oe(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){xe("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)Oe(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var a=t.substr(0,o),u=t.substr(o+1);if(""===u)void 0===n?se(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var s=e[a];s||(s=e[a]={}),Oe(s,u,n)}}else void 0===n?se(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Ke(e){var t={};for(var n in e)he(e,n)&&(t[n]=e[n]);return t}var Se=[].concat;function Ce(e){return Se.apply([],e)}var Ae="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ce([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return ae[e]})),je=Ae.map((function(e){return ae[e]}));Ee(Ae,(function(e){return[e,!0]}));var Te=null;function De(e){Te="undefined"!=typeof WeakMap&&new WeakMap;var t=Ie(e);return Te=null,t}function Ie(e){if(!e||"object"!=typeof e)return e;var t=Te&&Te.get(e);if(t)return t;if(se(e)){t=[],Te&&Te.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Ie(e[n]))}else if(je.indexOf(e.constructor)>=0)t=e;else{var i=le(e);for(var o in t=i===Object.prototype?{}:Object.create(i),Te&&Te.set(e,t),e)he(e,o)&&(t[o]=Ie(e[o]))}return t}var Be={}.toString;function Re(e){return Be.call(e).slice(8,-1)}var Me="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",Fe="symbol"==typeof Me?function(e){var t;return null!=e&&(t=e[Me])&&t.apply(e)}:function(){return null},Ne={};function $e(e){var t,n,r,i;if(1===arguments.length){if(se(e))return e.slice();if(this===Ne&&"string"==typeof e)return[e];if(i=Fe(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var qe="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},Le="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ue(e,t){Le=e,Ve=t}var Ve=function(){return!0},We=!new Error("").stack;function ze(){if(We)try{throw ze.arguments,new Error}catch(e){return e}return new Error}function Ye(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(Ve).map((function(e){return"\n"+e})).join("")):""}var He=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ge=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(He),Qe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Xe(e,t){this._e=ze(),this.name=e,this.message=t}function Je(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function Ze(e,t,n,r){this._e=ze(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Je(e,t)}function et(e,t){this._e=ze(),this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=Je(e,t)}ve(Xe).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Ye(this._e,2))}},toString:function(){return this.name+": "+this.message}}),ve(Ze).from(Xe),ve(et).from(Xe);var tt=Ge.reduce((function(e,t){return e[t]=t+"Error",e}),{}),nt=Xe,rt=Ge.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=ze(),this.name=n,e?"string"==typeof e?(this.message=e+(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=Qe[t]||n,this.inner=null)}return ve(r).from(nt),e[t]=r,e}),{});rt.Syntax=SyntaxError,rt.Type=TypeError,rt.Range=RangeError;var it=He.reduce((function(e,t){return e[t+"Error"]=rt[t],e}),{});var ot=Ge.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=rt[t]),e}),{});function at(){}function ut(e){return e}function st(e,t){return null==e||e===ut?t:function(n){return t(e(n))}}function ct(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function lt(e,t){return e===at?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ct(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ct(i,this.onerror):i),void 0!==o?o:n}}function ft(e,t){return e===at?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ct(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ct(r,this.onerror):r)}}function ht(e,t){return e===at?t:function(n){var r=e.apply(this,arguments);ce(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ct(i,this.onsuccess):i),o&&(this.onerror=this.onerror?ct(o,this.onerror):o),void 0===r?void 0===a?void 0:a:ce(r,a)}}function dt(e,t){return e===at?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function pt(e,t){return e===at?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}ot.ModifyError=Ze,ot.DexieError=Xe,ot.BulkError=et;var yt={},vt="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,le(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,le(t),e]}(),mt=vt[0],gt=vt[1],bt=vt[2],_t=gt&&gt.then,wt=mt&&mt.constructor,xt=!!bt,kt=!1,Et=bt?function(){bt.then(Yt)}:ae.setImmediate?setImmediate.bind(null,Yt):ae.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){Yt(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Yt,0)},Pt=function(e,t){It.push([e,t]),Kt&&(Et(),Kt=!1)},Ot=!0,Kt=!0,St=[],Ct=[],At=null,jt=ut,Tt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:bn,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{bn(e[0],e[1])}catch(e){}}))}},Dt=Tt,It=[],Bt=0,Rt=[];function Mt(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=at,this._lib=!1;var t=this._PSD=Dt;if(Le&&(this._stackHolder=ze(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==yt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&qt(this,this._value))}this._state=null,this._value=null,++t.ref,$t(this,e)}var Ft={get:function(){var e=Dt,t=rn;function n(n,r){var i=this,o=!e.global&&(e!==Dt||t!==rn),a=o&&!sn(),u=new Mt((function(t,u){Ut(i,new Nt(vn(n,e,o,a),vn(r,e,o,a),t,u,e))}));return Le&&zt(u,this),u}return n.prototype=yt,n},set:function(e){ye(this,"then",e&&e.prototype===yt?Ft:{get:function(){return e},set:Ft.set})}};function Nt(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function $t(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Ht();t&&"function"==typeof t.then?$t(e,(function(e,n){t instanceof Mt?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Lt(e)),n&&Gt()}}),qt.bind(null,e))}catch(t){qt(e,t)}}function qt(e,t){if(Ct.push(t),null===e._state){var n=e._lib&&Ht();t=jt(t),e._state=!1,e._value=t,Le&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((function(){var n=ge(t,"stack");t._promise=e,ye(t,"stack",{get:function(){return kt?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){St.some((function(t){return t._value===e._value}))||St.push(e)}(e),Lt(e),n&&Gt()}}function Lt(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ut(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===Bt&&(++Bt,Pt((function(){0==--Bt&&Qt()}),[]))}function Ut(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Bt,Pt(Vt,[n,e,t])}else e._listeners.push(t)}function Vt(e,t,n){try{At=t;var r,i=t._value;t._state?r=e(i):(Ct.length&&(Ct=[]),r=e(i),-1===Ct.indexOf(i)&&function(e){var t=St.length;for(;t;)if(St[--t]._value===e._value)return void St.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{At=null,0==--Bt&&Qt(),--n.psd.ref||n.psd.finalize()}}function Wt(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,a=e._value;null!=a?(i=a.name||"Error",o=a.message||a,r=Ye(a,0)):(i=a,o=""),t.push(i+(o?": "+o:"")+r)}return Le&&((r=Ye(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&Wt(e._prev,t,n)),t}function zt(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function Yt(){Ht()&&Gt()}function Ht(){var e=Ot;return Ot=!1,Kt=!1,e}function Gt(){var e,t,n;do{for(;It.length>0;)for(e=It,It=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(It.length>0);Ot=!0,Kt=!0}function Qt(){var e=St;St=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Rt.slice(0),n=t.length;n;)t[--n]()}function Xt(e){return new Mt(yt,!1,e)}function Jt(e,t){var n=Dt;return function(){var r=Ht(),i=Dt;try{return hn(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{hn(i,!1),r&&Gt()}}}de(Mt.prototype,{then:Ft,_then:function(e,t){Ut(this,new Nt(null,null,e,t,Dt))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):Xt(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):Xt(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),Xt(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{kt=!0;var e=Wt(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{kt=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Mt((function(r,i){var o=setTimeout((function(){return i(new rt.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&ye(Mt.prototype,Symbol.toStringTag,"Dexie.Promise"),Tt.env=dn(),de(Mt,{all:function(){var e=$e.apply(null,arguments).map(cn);return new Mt((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,o){return Mt.resolve(i).then((function(n){e[o]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof Mt)return e;if(e&&"function"==typeof e.then)return new Mt((function(t,n){e.then(t,n)}));var t=new Mt(yt,!0,e);return zt(t,At),t},reject:Xt,race:function(){var e=$e.apply(null,arguments).map(cn);return new Mt((function(t,n){e.map((function(e){return Mt.resolve(e).then(t,n)}))}))},PSD:{get:function(){return Dt},set:function(e){return Dt=e}},totalEchoes:{get:function(){return rn}},newPSD:an,usePSD:pn,scheduler:{get:function(){return Pt},set:function(e){Pt=e}},rejectionMapper:{get:function(){return jt},set:function(e){jt=e}},follow:function(e,t){return new Mt((function(n,r){return an((function(t,n){var r=Dt;r.unhandleds=[],r.onunhandled=n,r.finalize=ct((function(){var e=this;!function(e){function t(){e(),Rt.splice(Rt.indexOf(t),1)}Rt.push(t),++Bt,Pt((function(){0==--Bt&&Qt()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),wt&&(wt.allSettled&&ye(Mt,"allSettled",(function(){var e=$e.apply(null,arguments).map(cn);return new Mt((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return Mt.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),wt.any&&"undefined"!=typeof AggregateError&&ye(Mt,"any",(function(){var e=$e.apply(null,arguments).map(cn);return new Mt((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,o){return Mt.resolve(e).then((function(e){return t(e)}),(function(e){i[o]=e,--r||n(new AggregateError(i))}))}))}))})));var Zt={awaits:0,echoes:0,id:0},en=0,tn=[],nn=0,rn=0,on=0;function an(e,t,n,r){var i=Dt,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++on;var a=Tt.env;o.env=xt?{Promise:Mt,PromiseProp:{value:Mt,configurable:!0,writable:!0},all:Mt.all,race:Mt.race,allSettled:Mt.allSettled,any:Mt.any,resolve:Mt.resolve,reject:Mt.reject,nthen:mn(a.nthen,o),gthen:mn(a.gthen,o)}:{},t&&ce(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=pn(o,e,n,r);return 0===o.ref&&o.finalize(),u}function un(){return Zt.id||(Zt.id=++en),++Zt.awaits,Zt.echoes+=100,Zt.id}function sn(){return!!Zt.awaits&&(0==--Zt.awaits&&(Zt.id=0),Zt.echoes=100*Zt.awaits,!0)}function cn(e){return Zt.echoes&&e&&e.constructor===wt?(un(),e.then((function(e){return sn(),e}),(function(e){return sn(),_n(e)}))):e}function ln(e){++rn,Zt.echoes&&0!=--Zt.echoes||(Zt.echoes=Zt.id=0),tn.push(Dt),hn(e,!0)}function fn(){var e=tn[tn.length-1];tn.pop(),hn(e,!1)}function hn(e,t){var n=Dt;if((t?!Zt.echoes||nn++&&e===Dt:!nn||--nn&&e===Dt)||yn(t?ln.bind(null,e):fn),e!==Dt&&(Dt=e,n===Tt&&(Tt.env=dn()),xt)){var r=Tt.env.Promise,i=e.env;gt.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(ae,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function dn(){var e=ae.Promise;return xt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(ae,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:gt.then,gthen:e.prototype.then}:{}}function pn(e,t,n,r,i){var o=Dt;try{return hn(e,!0),t(n,r,i)}finally{hn(o,!1)}}function yn(e){_t.call(mt,e)}function vn(e,t,n,r){return"function"!=typeof e?e:function(){var i=Dt;n&&un(),hn(t,!0);try{return e.apply(this,arguments)}finally{hn(i,!1),r&&yn(sn)}}}function mn(e,t){return function(n,r){return e.call(this,vn(n,t),vn(r,t))}}-1===(""+_t).indexOf("[native code]")&&(un=sn=at);var gn="unhandledrejection";function bn(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,i={promise:t,reason:e};if(ae.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(gn,!0,!0),ce(r,i)):ae.CustomEvent&&ce(r=new CustomEvent(gn,{detail:i}),i),r&&ae.dispatchEvent&&(dispatchEvent(r),!ae.PromiseRejectionEvent&&ae.onunhandledrejection))try{ae.onunhandledrejection(r)}catch(e){}Le&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var _n=Mt.reject;function wn(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Dt.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===tt.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return wn(e,t,n,r)}))):_n(i)}return i._promise(t,(function(e,t){return an((function(){return Dt.trans=i,r(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}if(e._state.openComplete)return _n(new rt.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return _n(new rt.DatabaseClosed);e.open().catch(at)}return e._state.dbReadyPromise.then((function(){return wn(e,t,n,r)}))}var xn="3.2.1",kn=String.fromCharCode(65535),En=-1/0,Pn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",On="String expected.",Kn=[],Sn="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Cn=Sn,An=Sn,jn=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},Tn="__dbnames",Dn="readonly",In="readwrite";function Bn(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Rn={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Mn(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=De(t))[e],t}}var Fn=function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||Dt.trans,i=this.name;function o(e,n,r){if(!r.schema[i])throw new rt.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var a=Ht();try{return r&&r.db===this.db?r===Dt.trans?r._promise(e,o,n):an((function(){return r._promise(e,o,n)}),{trans:r,transless:Dt.transless||Dt}):wn(this.db,e,[this.name],o)}finally{a&&Gt()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(se(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=ue(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==kn)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));!n&&Le&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var r=this.schema.idxByName,i=this.db._deps.indexedDB;function o(e,t){try{return 0===i.cmp(e,t)}catch(e){return!1}}var a=t.reduce((function(t,n){var i=t[0],a=t[1],u=r[n],s=e[n];return[i||u,i||!u?Bn(a,u&&u.multi?function(e){var t=Pe(e,n);return se(t)&&t.some((function(e){return o(s,e)}))}:function(e){return o(s,Pe(e,n))}):a]}),[null,null]),u=a[0],s=a[1];return u?this.where(u.name).equals(e[u.keyPath]).filter(s):n?this.filter(s):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,se(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(he(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},e.prototype.defineClass=function(){return this.mapToClass((function(e){ce(this,e)}))},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=Mn(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})})).then((function(e){return e.numFailures?Mt.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{Oe(e,o,t)}catch(e){}return t}))},e.prototype.update=function(e,t){if("object"!=typeof e||se(e))return this.where(":id").equals(e).modify(t);var n=Pe(e,this.schema.primKey.keyPath);if(void 0===n)return _n(new rt.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?ue(t).forEach((function(n){Oe(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=Mn(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?Mt.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{Oe(e,o,t)}catch(e){}return t}))},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?Mt.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Rn})})).then((function(e){return e.numFailures?Mt.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},e.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,u=n.keyPath;if(u&&i)throw new rt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new rt.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,c=u&&a?e.map(Mn(u)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:c,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,a=e.failures;if(0===t)return o?n:i;throw new et(r.name+".bulkAdd(): "+t+" of "+s+" operations failed",a)}))}))},e.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,a=n.auto,u=n.keyPath;if(u&&i)throw new rt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new rt.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,c=u&&a?e.map(Mn(u)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:c,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,a=e.failures;if(0===t)return o?n:i;throw new et(r.name+".bulkPut(): "+t+" of "+s+" operations failed",a)}))}))},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,o=e.failures;if(0===r)return i;throw new et(t.name+".bulkDelete(): "+r+" of "+n+" operations failed",o)}))},e}();function Nn(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(e,r,i){if("object"==typeof e)return a(e);r||(r=dt),i||(i=at);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(t){return t!==e})),o.fire=o.subscribers.reduce(r,i)}};return t[e]=n[e]=o,o}function a(e){ue(e).forEach((function(t){var n=e[t];if(se(n))o(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new rt.InvalidArgument("Invalid event config");var r=o(t,ut,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){ke((function(){e.apply(null,t)}))}))}))}}))}}function $n(e,t){return ve(t).from({prototype:e}),t}function qn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ln(e,t){e.filter=Bn(e.filter,t)}function Un(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Bn(r(),t())}:t,e.justLimit=n&&!r}function Vn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new rt.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Wn(e,t,n){var r=Vn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function zn(e,t,n,r){var i=e.replayFilter?Bn(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(e,n,r){if(!i||i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var a=n.primaryKey,u=""+a;"[object ArrayBuffer]"===u&&(u=""+new Uint8Array(a)),he(o,u)||(o[u]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),Yn(Wn(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return Yn(Wn(e,r,n),Bn(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Yn(e,t,n,r){var i=Jt(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=at}),(function(t){e.fail(t),n=at}))||i(e.value,e,(function(e){return n=e})),n()}))}))}function Hn(e,t){try{var n=Gn(e),r=Gn(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}(Qn(e),Qn(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o){var a=Hn(e[o],t[o]);if(0!==a)return a}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function Gn(e){var t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";var n=Re(e);return"ArrayBuffer"===n?"binary":n}function Qn(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Xn=function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,_n.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,_n.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Bn(t.algorithm,e)},e.prototype._iterate=function(e,t){return zn(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&ce(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return zn(t,e,n,t.table.core)}))},e.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(qn(n,!0))return r.count({trans:e,query:{index:Vn(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return zn(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function u(e,t){var n=o(e,i),r=o(t,i);return n<r?-a:n>r?a:0}return this.toArray((function(e){return e.sort(u)})).then(t)},e.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&qn(n,!0)&&n.limit>0){var r=n.valueMapper,i=Vn(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var o=[];return zn(n,(function(e){return o.push(e)}),e,n.table.core).then((function(){return o}))}),e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,qn(t)?Un(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):Un(t,(function(){var t=e;return function(){return--t<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Un(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},e.prototype.until=function(e,t){return Ln(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){var t,n;return Ln(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=Bn(t.isMatch,n),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&qn(t,!0)&&t.limit>0)return this._read((function(e){var n=Vn(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Ln(this._ctx,(function(e){var t=e.primaryKey.toString(),r=he(n,t);return n[t]=!0,!r})),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var i;if("function"==typeof e)i=e;else{var o=ue(e),a=o.length;i=function(t){for(var n=!1,r=0;r<a;++r){var i=o[r],u=e[i];Pe(t,i)!==u&&(Oe(t,i,u),n=!0)}return n}}var u=n.table.core,s=u.schema.primaryKey,c=s.outbound,l=s.extractKey,f=t.db._options.modifyChunkSize||200,h=[],d=0,p=[],y=function(e,t){var n=t.failures,r=t.numFailures;d+=e-r;for(var i=0,o=ue(n);i<o.length;i++){var a=o[i];h.push(n[a])}};return t.clone().primaryKeys().then((function(t){var o=function(a){var s=Math.min(f,t.length-a);return u.getMany({trans:r,keys:t.slice(a,a+s),cache:"immutable"}).then((function(h){for(var d=[],p=[],v=c?[]:null,m=[],g=0;g<s;++g){var b=h[g],_={value:De(b),primKey:t[a+g]};!1!==i.call(_,_.value,_)&&(null==_.value?m.push(t[a+g]):c||0===Hn(l(b),l(_.value))?(p.push(_.value),c&&v.push(t[a+g])):(m.push(t[a+g]),d.push(_.value)))}var w=qn(n)&&n.limit===1/0&&("function"!=typeof e||e===Jn)&&{index:n.index,range:n.range};return Promise.resolve(d.length>0&&u.mutate({trans:r,type:"add",values:d}).then((function(e){for(var t in e.failures)m.splice(parseInt(t),1);y(d.length,e)}))).then((function(){return(p.length>0||w&&"object"==typeof e)&&u.mutate({trans:r,type:"put",keys:v,values:p,criteria:w,changeSpec:"function"!=typeof e&&e}).then((function(e){return y(p.length,e)}))})).then((function(){return(m.length>0||w&&e===Jn)&&u.mutate({trans:r,type:"delete",keys:m,criteria:w}).then((function(e){return y(m.length,e)}))})).then((function(){return t.length>a+s&&o(a+f)}))}))};return o(0).then((function(){if(h.length>0)throw new Ze("Error modifying one or more objects",h,d,p);return t.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,t=e.range;return qn(e)&&(e.isPrimKey&&!An||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures;e.lastResult,e.results;var r=e.numFailures;if(r)throw new Ze("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify(Jn)},e}(),Jn=function(e,t){return t.value=null};function Zn(e,t){return e<t?-1:e===t?0:1}function er(e,t){return e>t?-1:e===t?0:1}function tr(e,t,n){var r=e instanceof ur?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function nr(e){return new e.Collection(e,(function(){return ar("")})).limit(0)}function rr(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),u=-1,s=0;s<a;++s){var c=t[s];if(c!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;i(e[s],c)<0&&(u=s)}return a<r.length&&"next"===o?e+n.substr(e.length):a<e.length&&"prev"===o?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function ir(e,t,n,r){var i,o,a,u,s,c,l,f=n.length;if(!n.every((function(e){return"string"==typeof e})))return tr(e,On);function h(e){i=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),o=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),a="next"===e?Zn:er;var t=n.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));u=t.map((function(e){return e.upper})),s=t.map((function(e){return e.lower})),c=e,l="next"===e?"":r}h("next");var d=new e.Collection(e,(function(){return or(u[0],s[f-1]+r)}));d._ondirectionchange=function(e){h(e)};var p=0;return d._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var h=o(i);if(t(h,s,p))return!0;for(var d=null,y=p;y<f;++y){var v=rr(i,h,u[y],s[y],a,c);null===v&&null===d?p=y+1:(null===d||a(d,v)>0)&&(d=v)}return n(null!==d?function(){e.continue(d+l)}:r),!1})),d}function or(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function ar(e){return{type:1,lower:e,upper:e}}var ur=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?nr(this):new this.Collection(this,(function(){return or(e,t,!n,!r)}))}catch(e){return tr(this,Pn)}},e.prototype.equals=function(e){return null==e?tr(this,Pn):new this.Collection(this,(function(){return ar(e)}))},e.prototype.above=function(e){return null==e?tr(this,Pn):new this.Collection(this,(function(){return or(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?tr(this,Pn):new this.Collection(this,(function(){return or(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?tr(this,Pn):new this.Collection(this,(function(){return or(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?tr(this,Pn):new this.Collection(this,(function(){return or(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!=typeof e?tr(this,On):this.between(e,e+kn,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):ir(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],kn)},e.prototype.equalsIgnoreCase=function(e){return ir(this,(function(e,t){return e===t[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=$e.apply(Ne,arguments);return 0===e.length?nr(this):ir(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=$e.apply(Ne,arguments);return 0===e.length?nr(this):ir(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,kn)},e.prototype.anyOf=function(){var e=this,t=$e.apply(Ne,arguments),n=this._cmp;try{t.sort(n)}catch(e){return tr(this,Pn)}if(0===t.length)return nr(this);var r=new this.Collection(this,(function(){return or(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,o){for(var a=e.key;n(a,t[i])>0;)if(++i===t.length)return r(o),!1;return 0===n(a,t[i])||(r((function(){e.continue(t[i])})),!1)})),r},e.prototype.notEqual=function(e){return this.inAnyRange([[En,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=$e.apply(Ne,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return tr(this,Pn)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[En,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,o=this._descending,a=this._min,u=this._max;if(0===e.length)return nr(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return tr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",rt.InvalidArgument);var s=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;var l,f=i;function h(e,t){return f(e[0],t[0])}try{(l=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var o=e[n];if(r(t[0],o[1])<0&&r(t[1],o[0])>0){o[0]=a(o[0],t[0]),o[1]=u(o[1],t[1]);break}}return n===i&&e.push(t),e}),[])).sort(h)}catch(e){return tr(this,Pn)}var d=0,p=c?function(e){return i(e,l[d][1])>0}:function(e){return i(e,l[d][1])>=0},y=s?function(e){return o(e,l[d][0])>0}:function(e){return o(e,l[d][0])>=0};var v=p,m=new this.Collection(this,(function(){return or(l[0][0],l[l.length-1][1],!s,!c)}));return m._ondirectionchange=function(e){"next"===e?(v=p,f=i):(v=y,f=o),l.sort(h)},m._addAlgorithm((function(e,t,r){for(var o=e.key;v(o);)if(++d===l.length)return t(r),!1;return!!function(e){return!p(e)&&!y(e)}(o)||(0===n._cmp(o,l[d][1])||0===n._cmp(o,l[d][0])||t((function(){f===i?e.continue(l[d][0]):e.continue(l[d][1])})),!1)})),m},e.prototype.startsWithAnyOf=function(){var e=$e.apply(Ne,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?nr(this):this.inAnyRange(e.map((function(e){return[e,e+kn]}))):tr(this,"startsWithAnyOf() only works with strings")},e}();function sr(e){return Jt((function(t){return cr(t),e(t.target.error),!1}))}function cr(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var lr="storagemutated",fr="x-storagemutated-1",hr=Nn(null,lr),dr=function(){function e(){}return e.prototype._lock=function(){return xe(!Dt.global),++this._reculock,1!==this._reculock||Dt.global||(Dt.lockOwnerFor=this),this},e.prototype._unlock=function(){if(xe(!Dt.global),0==--this._reculock)for(Dt.global||(Dt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{pn(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&Dt.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(xe(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new rt.DatabaseClosed(r);case"MissingAPIError":throw new rt.MissingAPI(r.message,r);default:throw new rt.OpenFailed(r)}if(!this.active)throw new rt.TransactionInactive;return xe(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Jt((function(n){cr(n),t._reject(e.error)})),e.onabort=Jt((function(n){cr(n),t.active&&t._reject(new rt.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=Jt((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&hr.storagemutated.fire(e.mutatedParts)})),this},e.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return _n(new rt.ReadOnly("Transaction is readonly"));if(!this.active)return _n(new rt.TransactionInactive);if(this._locked())return new Mt((function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},Dt])}));if(n)return an((function(){var e=new Mt((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new Mt((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=Mt.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new Mt((function(e,r){n.then((function(n){return t._waitingQueue.push(Jt(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(Jt(r.bind(null,e)))})).finally((function(){t._waitingFor===i&&(t._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new rt.Abort))},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(he(t,e))return t[e];var n=this.schema[e];if(!n)throw new rt.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e}();function pr(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+yr(t)}}function yr(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function vr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Ee(n,(function(e){return[e.name,e]}))}}var mr=function(e){try{return e.only([[]]),mr=function(){return[[]]},[[]]}catch(e){return mr=function(){return kn},kn}};function gr(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return Pe(t,e)}}(e):function(t){return Pe(t,e)}}function br(e){return[].slice.call(e)}var _r=0;function wr(e){return null==e?":id":"string"==typeof e?e:"["+e.join("+")+"]"}function xr(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,i=e.lowerOpen,o=e.upperOpen;return void 0===n?void 0===r?null:t.upperBound(r,!!o):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!o)}var i=function(e,t){var n=br(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=se(t),i=null==t,o={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:gr(t)},indexes:br(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,i=e.keyPath,a={name:t,compound:se(i),keyPath:i,unique:n,multiEntry:r,extractKey:gr(i)};return o[wr(i)]=a,a})),getIndexByKeyPath:function(e){return o[wr(e)]}};return o[":id"]=a.primaryKey,null!=t&&(o[wr(t)]=a.primaryKey),a}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),o=i.schema,a=i.hasGetAll,u=o.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(e){var n=e.trans,i=e.type,o=e.keys,a=e.values,u=e.range;return new Promise((function(e,s){e=Jt(e);var c=n.objectStore(t),l=null==c.keyPath,f="put"===i||"add"===i;if(!f&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var h,d=(o||a||{length:1}).length;if(o&&a&&o.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===d)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var p=[],y=[],v=0,m=function(e){++v,cr(e)};if("deleteRange"===i){if(4===u.type)return e({numFailures:v,failures:y,results:[],lastResult:void 0});3===u.type?p.push(h=c.clear()):p.push(h=c.delete(r(u)))}else{var g=f?l?[a,o]:[a,null]:[o,null],b=g[0],_=g[1];if(f)for(var w=0;w<d;++w)p.push(h=_&&void 0!==_[w]?c[i](b[w],_[w]):c[i](b[w])),h.onerror=m;else for(w=0;w<d;++w)p.push(h=c[i](b[w])),h.onerror=m}var x=function(t){var n=t.target.result;p.forEach((function(e,t){return null!=e.error&&(y[t]=e.error)})),e({numFailures:v,failures:y,results:"delete"===i?o:p.map((function(e){return e.result})),lastResult:n})};h.onerror=function(e){m(e),x(e)},h.onsuccess=x}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,i){e=Jt(e);for(var o,a=n.objectStore(t),u=r.length,s=new Array(u),c=0,l=0,f=function(t){var n=t.target;s[n._pos]=n.result,++l===c&&e(s)},h=sr(i),d=0;d<u;++d)null!=r[d]&&((o=a.get(r[d]))._pos=d,o.onsuccess=f,o.onerror=h,++c);0===c&&e(s)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,i){e=Jt(e);var o=n.objectStore(t).get(r);o.onsuccess=function(t){return e(t.target.result)},o.onerror=sr(i)}))},query:function(e){return function(n){return new Promise((function(i,o){i=Jt(i);var a=n.trans,u=n.values,s=n.limit,c=n.query,l=s===1/0?void 0:s,f=c.index,h=c.range,d=a.objectStore(t),p=f.isPrimaryKey?d:d.index(f.name),y=r(h);if(0===s)return i({result:[]});if(e){var v=u?p.getAll(y,l):p.getAllKeys(y,l);v.onsuccess=function(e){return i({result:e.target.result})},v.onerror=sr(o)}else{var m=0,g=u||!("openKeyCursor"in p)?p.openCursor(y):p.openKeyCursor(y),b=[];g.onsuccess=function(e){var t=g.result;return t?(b.push(u?t.value:t.primaryKey),++m===s?i({result:b}):void t.continue()):i({result:b})},g.onerror=sr(o)}}))}}(a),openCursor:function(e){var n=e.trans,i=e.values,o=e.query,a=e.reverse,u=e.unique;return new Promise((function(e,s){e=Jt(e);var c=o.index,l=o.range,f=n.objectStore(t),h=c.isPrimaryKey?f:f.index(c.name),d=a?u?"prevunique":"prev":u?"nextunique":"next",p=i||!("openKeyCursor"in h)?h.openCursor(r(l),d):h.openKeyCursor(r(l),d);p.onerror=sr(s),p.onsuccess=Jt((function(t){var r=p.result;if(r){r.___id=++_r,r.done=!1;var i=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var a=r.advance.bind(r),u=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=Jt(s),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=Jt(e),p.onerror=sr(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=u,e(t)}})),n=function(){if(p.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=Jt((function(e){p.onsuccess=n,n()})),r.continue=i,r.continuePrimaryKey=o,r.advance=a,n(),t},e(r)}else e(null)}),s)}))},count:function(e){var n=e.query,i=e.trans,o=n.index,a=n.range;return new Promise((function(e,n){var u=i.objectStore(t),s=o.isPrimaryKey?u:u.index(o.name),c=r(a),l=c?s.count(c):s.count();l.onsuccess=Jt((function(t){return e(t.target.result)})),l.onerror=sr(n)}))}}}(e)})),s={};return u.forEach((function(e){return s[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!s[e])throw new Error("Table '"+e+"' not found");return s[e]},MIN_KEY:-1/0,MAX_KEY:mr(t),schema:o}}function kr(e,t,n,r){var i=n.IDBKeyRange;return n.indexedDB,{dbcore:function(e,t){return t.reduce((function(e,t){var n=t.create;return ie(ie({},e),n(e))}),e)}(xr(t,i,r),e.dbcore)}}function Er(e,t){var n=e._novip,r=t.db,i=kr(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach((function(e){var t=e.name;n.core.schema.tables.some((function(e){return e.name===t}))&&(e.core=n.core.table(t),n[t]instanceof n.Table&&(n[t].core=e.core))}))}function Pr(e,t,n,r){var i=e._novip;n.forEach((function(e){var n=r[e];t.forEach((function(t){var r=ge(t,e);(!r||"value"in r&&void 0===r.value)&&(t===i.Transaction.prototype||t instanceof i.Transaction?ye(t,e,{get:function(){return this.table(e)},set:function(t){pe(this,e,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):t[e]=new i.Table(e,n))}))}))}function Or(e,t){var n=e._novip;t.forEach((function(e){for(var t in e)e[t]instanceof n.Table&&delete e[t]}))}function Kr(e,t){return e._cfg.version-t._cfg.version}function Sr(e,t,n,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),u=Dt.transless||Dt;an((function(){Dt.trans=o,Dt.transless=u,0===t?(ue(i).forEach((function(e){Ar(n,e,i[e].primKey,i[e].indexes)})),Er(e,n),Mt.follow((function(){return e.on.populate.fire(o)})).catch(a)):function(e,t,n,r){var i=e._novip,o=[],a=i._versions,u=i._dbSchema=Tr(i,i.idbdb,r),s=!1;function c(){return o.length?Mt.resolve(o.shift()(n.idbtrans)).then(c):Mt.resolve()}return a.filter((function(e){return e._cfg.version>=t})).forEach((function(e){o.push((function(){var o=u,a=e._cfg.dbschema;Dr(i,o,r),Dr(i,a,r),u=i._dbSchema=a;var c=Cr(o,a);c.add.forEach((function(e){Ar(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((function(e){if(e.recreate)throw new rt.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return jr(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),jr(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var l=e._cfg.contentUpgrade;if(l&&e._cfg.version>t){Er(i,r),n._memoizedTables={},s=!0;var f=Ke(a);c.del.forEach((function(e){f[e]=o[e]})),Or(i,[i.Transaction.prototype]),Pr(i,[i.Transaction.prototype],ue(f),f),n.schema=f;var h,d=qe(l);d&&un();var p=Mt.follow((function(){if((h=l(n))&&d){var e=sn.bind(null,null);h.then(e,e)}}));return h&&"function"==typeof h.then?Mt.resolve(h):p.then((function(){return h}))}})),o.push((function(t){s&&Cn||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((function(n){return null==e[n]&&t.db.deleteObjectStore(n)}))}(e._cfg.dbschema,t);Or(i,[i.Transaction.prototype]),Pr(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema}))})),c().then((function(){var e,t;t=r,ue(e=u).forEach((function(n){t.db.objectStoreNames.contains(n)||Ar(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,o,n).catch(a)}))}function Cr(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],o=t[n];if(i){var a={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!Sn)a.recreate=!0,r.change.push(a);else{var u=i.idxByName,s=o.idxByName,c=void 0;for(c in u)s[c]||a.del.push(c);for(c in s){var l=u[c],f=s[c];l?l.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([n,o])}return r}function Ar(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return jr(i,e)})),i}function jr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Tr(e,t,n){var r={};return _e(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),i=t.keyPath,o=pr(yr(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),a=[],u=0;u<t.indexNames.length;++u){var s=t.index(t.indexNames[u]);i=s.keyPath;var c=pr(s.name,i,!!s.unique,!!s.multiEntry,!1,i&&"string"!=typeof i,!1);a.push(c)}r[e]=vr(e,o,a)})),r}function Dr(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,o=0;o<i.length;++o){var a=i[o],u=n.objectStore(a);r._hasGetAll="getAll"in u;for(var s=0;s<u.indexNames.length;++s){var c=u.indexNames[s],l=u.index(c).keyPath,f="string"==typeof l?l:"["+_e(l).join("+")+"]";if(t[a]){var h=t[a].idxByName[f];h&&(h.name=c,delete t[a].idxByName[f],t[a].idxByName[c]=h)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&ae.WorkerGlobalScope&&ae instanceof ae.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}var Ir=function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){ue(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return pr(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),se(r),0===t)})),i=r.shift();if(i.multi)throw new rt.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new rt.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new rt.Schema("Index must have a name and cannot be an empty string")})),t[n]=vr(n,i,r)}}))},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?ce(this._cfg.storesSource,e):e;var n=t._versions,r={},i={};return n.forEach((function(e){ce(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),t._dbSchema=i,Or(t,[t._allTables,t,t.Transaction.prototype]),Pr(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],ue(i),i),t._storeNames=ue(i),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=pt(this._cfg.contentUpgrade||at,e),this},e}();function Br(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new ai(Tn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Rr(e){return e&&"function"==typeof e.databases}function Mr(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!Rr(n)&&t!==Tn&&Br(n,r).delete(t).catch(at)}function Fr(e){return an((function(){return Dt.letThrough=!0,e()}))}function Nr(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function $r(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?_n(t.dbOpenError):e}));Le&&(t.openCanceller._stackHolder=ze()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new rt.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,a=null,u=!1;return Mt.race([r,("undefined"==typeof navigator?Mt.resolve():Nr()).then((function(){return new Mt((function(r,o){if(i(),!n)throw new rt.MissingAPI;var s=e.name,c=t.autoSchema?n.open(s):n.open(s,Math.round(10*e.verno));if(!c)throw new rt.MissingAPI;c.onerror=sr(o),c.onblocked=Jt(e._fireOnBlocked),c.onupgradeneeded=Jt((function(r){if(a=c.transaction,t.autoSchema&&!e._options.allowEmptyDB){c.onerror=cr,a.abort(),c.result.close();var i=n.deleteDatabase(s);i.onsuccess=i.onerror=Jt((function(){o(new rt.NoSuchDatabase("Database "+s+" doesnt exist"))}))}else{a.onerror=sr(o);var l=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;u=l<1,e._novip.idbdb=c.result,Sr(e,l/10,a,o)}}),o),c.onsuccess=Jt((function(){a=null;var n,i=e._novip.idbdb=c.result,o=_e(i.objectStoreNames);if(o.length>0)try{var l=i.transaction(1===(n=o).length?n[0]:n,"readonly");t.autoSchema?function(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=Tr(0,t,n);r._storeNames=_e(t.objectStoreNames,0),Pr(r,[r._allTables],ue(i),i)}(e,i,l):(Dr(e,e._dbSchema,l),function(e,t){var n=Cr(Tr(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,l)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Er(e,l)}catch(e){}Kn.push(e),i.onversionchange=Jt((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),i.onclose=Jt((function(t){e.on("close").fire(t)})),u&&function(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!Rr(n)&&t!==Tn&&Br(n,r).put({name:t}).catch(at)}(e._deps,s),r()}),o)}))}))]).then((function(){return i(),t.onReadyBeingFired=[],Mt.resolve(Fr((function(){return e.on.ready.fire(e.vip)}))).then((function n(){if(t.onReadyBeingFired.length>0){var r=t.onReadyBeingFired.reduce(pt,at);return t.onReadyBeingFired=[],Mt.resolve(Fr((function(){return r(e.vip)}))).then(n)}}))})).finally((function(){t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((function(){return e})).catch((function(n){t.dbOpenError=n;try{a&&a.abort()}catch(e){}return r===t.openCanceller&&e._close(),_n(n)})).finally((function(){t.openComplete=!0,o()}))}function qr(e){var t=function(t){return e.next(t)},n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t),o=i.value;return i.done?o:o&&"function"==typeof o.then?o.then(n,r):se(o)?Promise.all(o).then(n,r):n(o)}}return i(t)()}function Lr(e,t,n){var r=arguments.length;if(r<2)throw new rt.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=Ce(i);return[e,o,n]}function Ur(e,t,n,r,i){return Mt.resolve().then((function(){var o=Dt.transless||Dt,a=e._createTransaction(t,n,e._dbSchema,r),u={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===tt.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return Ur(e,t,n,null,i)}))):_n(r)}var s,c=qe(i);c&&un();var l=Mt.follow((function(){if(s=i.call(a,a))if(c){var e=sn.bind(null,null);s.then(e,e)}else"function"==typeof s.next&&"function"==typeof s.throw&&(s=qr(s))}),u);return(s&&"function"==typeof s.then?Mt.resolve(s).then((function(e){return a.active?e:_n(new rt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):l.then((function(){return s}))).then((function(e){return r&&a._resolve(),a._completion.then((function(){return e}))})).catch((function(e){return a._reject(e),_n(e)}))}))}function Vr(e,t,n){for(var r=se(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Wr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return ie(ie({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},o=[];function a(e,t,n){var r=wr(e),u=i[r]=i[r]||[],s=null==e?0:"string"==typeof e?1:e.length,c=t>0,l=ie(ie({},n),{isVirtual:c,keyTail:t,keyLength:s,extractKey:gr(e),unique:!c&&n.unique});(u.push(l),l.isPrimaryKey||o.push(l),s>1)&&a(2===s?e[0]:e.slice(0,s-1),t+1,n);return u.sort((function(e,t){return e.keyTail-t.keyTail})),l}var u=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[u];for(var s=0,c=r.indexes;s<c.length;s++){var l=c[s];a(l.keyPath,0,l)}function f(t){var n,r,i=t.query.index;return i.isVirtual?ie(ie({},t),{query:{index:i,range:(n=t.query.range,r=i.keyTail,{type:1===n.type?2:n.type,lower:Vr(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:Vr(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0})}}):t}return ie(ie({},n),{schema:ie(ie({},r),{primaryKey:u,indexes:o,getIndexByKeyPath:function(e){var t=i[wr(e)];return t&&t[0]}}),count:function(e){return n.count(f(e))},query:function(e){return n.query(f(e))},openCursor:function(t){var r=t.query.index,i=r.keyTail,o=r.isVirtual,a=r.keyLength;if(!o)return n.openCursor(t);return n.openCursor(f(t)).then((function(n){return n&&function(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Vr(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Vr(t,e.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return n.value}}})}(n)}))}})}})}};function zr(e,t,n,r){return n=n||{},r=r||"",ue(e).forEach((function(i){if(he(t,i)){var o=e[i],a=t[i];if("object"==typeof o&&"object"==typeof a&&o&&a){var u=Re(o);u!==Re(a)?n[r+i]=t[i]:"Object"===u?zr(o,a,n,r+i+"."):o!==a&&(n[r+i]=t[i])}else o!==a&&(n[r+i]=t[i])}else n[r+i]=void 0})),ue(t).forEach((function(i){he(e,i)||(n[r+i]=t[i])})),n}var Yr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return ie(ie({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return ie(ie({},n),{mutate:function(e){var i=Dt.trans,o=i.table(t).hook,a=o.deleting,u=o.creating,s=o.updating;switch(e.type){case"add":if(u.fire===at)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"put":if(u.fire===at&&s.fire===at)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"delete":if(a.fire===at)break;return i._promise("readwrite",(function(){return c(e)}),!0);case"deleteRange":if(a.fire===at)break;return i._promise("readwrite",(function(){return function(e){return l(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function c(e){var t=Dt.trans,i=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?ie(ie({},e),{keys:i}):ie({},e)).type&&(e.values=oe([],e.values,!0)),e.keys&&(e.keys=oe([],e.keys,!0)),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,i).then((function(o){var c=i.map((function(n,i){var c=o[i],l={onerror:null,onsuccess:null};if("delete"===e.type)a.fire.call(l,n,c,t);else if("add"===e.type||void 0===c){var f=u.fire.call(l,n,e.values[i],t);null==n&&null!=f&&(n=f,e.keys[i]=n,r.outbound||Oe(e.values[i],r.keyPath,n))}else{var h=zr(c,e.values[i]),d=s.fire.call(l,h,n,c,t);if(d){var p=e.values[i];Object.keys(d).forEach((function(e){he(p,e)?p[e]=d[e]:Oe(p,e,d[e])}))}}return l}));return n.mutate(e).then((function(t){for(var n=t.failures,r=t.results,a=t.numFailures,u=t.lastResult,s=0;s<i.length;++s){var l=r?r[s]:i[s],f=c[s];null==l?f.onerror&&f.onerror(n[s]):f.onsuccess&&f.onsuccess("put"===e.type&&o[s]?e.values[s]:l)}return{failures:n,results:r,numFailures:a,lastResult:u}})).catch((function(e){return c.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}function l(e,t,i){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:i}).then((function(n){var r=n.result;return c({type:"delete",keys:r,trans:e}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):r.length<i?{failures:[],numFailures:0,lastResult:void 0}:l(e,ie(ie({},t),{lower:r[r.length-1],lowerOpen:!0}),i)}))}))}}})}})}};function Hr(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)0===Hn(t.keys[i],e[o])&&(r.push(n?De(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch(e){return null}}var Gr,Qr={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return ie(ie({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=Hr(e.keys,e.trans._cache,"clone"===e.cache);return t?Mt.resolve(t):n.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?De(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function Xr(e){return!("from"in e)}var Jr=function(e,t){if(!this){var n=new Jr;return e&&"d"in e&&ce(n,e),n}ce(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Zr(e,t,n){var r=Hn(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(Xr(e))return ce(e,{from:t,to:n,d:1});var i=e.l,o=e.r;if(Hn(n,e.from)<0)return i?Zr(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},ni(e);if(Hn(t,e.to)>0)return o?Zr(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},ni(e);Hn(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),Hn(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var a=!e.r;i&&!e.l&&ei(e,i),o&&a&&ei(e,o)}}function ei(e,t){Xr(t)||function e(t,n){var r=n.from,i=n.to,o=n.l,a=n.r;Zr(t,r,i),o&&e(t,o),a&&e(t,a)}(e,t)}function ti(e){var t=Xr(e)?null:{s:0,n:e};return{next:function(e){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Hn(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Hn(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function ni(e){var t,n,r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var o="r"===i?"l":"r",a=ie({},e),u=e[i];e.from=u.from,e.to=u.to,e[i]=u[i],a[i]=u[o],e[o]=a,a.d=ri(a)}e.d=ri(e)}function ri(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}de(Jr.prototype,((Gr={add:function(e){return ei(this,e),this},addKey:function(e){return Zr(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return Zr(t,e,e)})),this}})[Me]=function(){return ti(this)},Gr));var ii={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new Jr(e.MIN_KEY,e.MAX_KEY);return ie(ie({},e),{table:function(r){var i=e.table(r),o=i.schema,a=o.primaryKey,u=a.extractKey,s=a.outbound,c=ie(ie({},i),{mutate:function(e){var a=e.trans,u=a.mutatedParts||(a.mutatedParts={}),s=function(e){var n="idb://"+t+"/"+r+"/"+e;return u[n]||(u[n]=new Jr)},c=s(""),l=s(":dels"),f=e.type,h="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[],d=h[0],p=h[1],y=e.trans._cache;return i.mutate(e).then((function(e){if(se(d)){"delete"!==f&&(d=e.results),c.addKeys(d);var t=Hr(d,y);t||"add"===f||l.addKeys(d),(t||p)&&function(e,t,n,r){function i(t){var i=e(t.name||"");function o(e){return null!=e?t.extractKey(e):null}var a=function(e){return t.multiEntry&&se(e)?e.forEach((function(e){return i.addKey(e)})):i.addKey(e)};(n||r).forEach((function(e,t){var i=n&&o(n[t]),u=r&&o(r[t]);0!==Hn(i,u)&&(null!=i&&a(i),null!=u&&a(u))}))}t.indexes.forEach(i)}(s,o,t,p)}else if(d){var r={from:d.lower,to:d.upper};l.add(r),c.add(r)}else c.add(n),l.add(n),o.indexes.forEach((function(e){return s(e.name).add(n)}));return e}))}}),l=function(t){var n,r,i=t.query,o=i.index,a=i.range;return[o,new Jr(null!==(n=a.lower)&&void 0!==n?n:e.MIN_KEY,null!==(r=a.upper)&&void 0!==r?r:e.MAX_KEY)]},f={get:function(e){return[a,new Jr(e.key)]},getMany:function(e){return[a,(new Jr).addKeys(e.keys)]},count:l,query:l,openCursor:l};return ue(f).forEach((function(e){c[e]=function(o){var a=Dt.subscr;if(a){var c=function(e){var n="idb://"+t+"/"+r+"/"+e;return a[n]||(a[n]=new Jr)},l=c(""),h=c(":dels"),d=f[e](o),p=d[0],y=d[1];if(c(p.name||"").add(y),!p.isPrimaryKey){if("count"!==e){var v="query"===e&&s&&o.values&&i.query(ie(ie({},o),{values:!1}));return i[e].apply(this,arguments).then((function(t){if("query"===e){if(s&&o.values)return v.then((function(e){var n=e.result;return l.addKeys(n),t}));var n=o.values?t.result.map(u):t.result;o.values?l.addKeys(n):h.addKeys(n)}else if("openCursor"===e){var r=t,i=o.values;return r&&Object.create(r,{key:{get:function(){return h.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return h.addKey(e),e}},value:{get:function(){return i&&l.addKey(r.primaryKey),r.value}}})}return t}))}h.add(n)}}return i[e].apply(this,arguments)}})),c}})}};var oi,ai=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=ie({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:at,dbReadyPromise:null,cancelOpen:at,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};a.dbReadyPromise=new Mt((function(e){a.dbReadyResolve=e})),a.openCanceller=new Mt((function(e,t){a.cancelOpen=t})),this._state=a,this.name=t,this.on=Nn(this,"populate","blocked","versionchange","close",{ready:[pt,at]}),this.on.ready.subscribe=we(this.on.ready.subscribe,(function(t){return function(n,i){e.vip((function(){var e=r._state;if(e.openComplete)e.dbOpenError||Mt.resolve().then(n),i&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),i&&t(n);else{t(n);var o=r;i||t((function e(){o.on.ready.unsubscribe(n),o.on.ready.unsubscribe(e)}))}}))}})),this.Collection=function(e){return $n(Xn.prototype,(function(t,n){this.db=e;var r=Rn,i=null;if(n)try{r=n()}catch(e){i=e}var o=t._ctx,a=o.table,u=a.hook.reading.fire;this._ctx={table:a,index:o.index,isPrimKey:!o.index||a.schema.primKey.keyPath&&o.index===a.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:o.or,valueMapper:u!==ut?u:null}}))}(this),this.Table=function(e){return $n(Fn.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Nn(null,{creating:[lt,at],reading:[st,ut],updating:[ht,at],deleting:[ft,at]})}))}(this),this.Transaction=function(e){return $n(dr.prototype,(function(t,n,r,i,o){var a=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Nn(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Mt((function(e,t){a._resolve=e,a._reject=t})),this._completion.then((function(){a.active=!1,a.on.complete.fire()}),(function(e){var t=a.active;return a.active=!1,a.on.error.fire(e),a.parent?a.parent._reject(e):t&&a.idbtrans&&a.idbtrans.abort(),_n(e)}))}))}(this),this.Version=function(e){return $n(Ir.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return $n(ur.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var i=e._deps.indexedDB;if(!i)throw new rt.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(e,t){return i.cmp(t,e)},this._max=function(e,t){return i.cmp(e,t)>0?e:t},this._min=function(e,t){return i.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+e.oldVersion/10)})),this._maxKey=mr(n.IDBKeyRange),this._createTransaction=function(e,t,n,i){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),Kn.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Wr),this.use(Yr),this.use(ii),this.use(Qr),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach((function(e){return e(r)}))}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new rt.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new rt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(Kr),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||Dt.letThrough||this._vip)?e():new Mt((function(e,n){if(t._state.openComplete)return n(new rt.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new rt.DatabaseClosed);t.open().catch(at)}t._state.dbReadyPromise.then(e,n)})).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;i&&this.unuse({stack:t,name:i});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:null==r?10:r,name:i}),o.sort((function(e,t){return e.level-t.level})),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},e.prototype.open=function(){return $r(this)},e.prototype._close=function(){var e=this._state,t=Kn.indexOf(this);if(t>=0&&Kn.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new Mt((function(t){e.dbReadyResolve=t})),e.openCanceller=new Mt((function(t,n){e.cancelOpen=n}))},e.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new rt.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},e.prototype.delete=function(){var e=this,t=arguments.length>0,n=this._state;return new Mt((function(r,i){var o=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=Jt((function(){Mr(e._deps,e.name),r()})),t.onerror=sr(i),t.onblocked=e._fireOnBlocked};if(t)throw new rt.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()}))},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return ue(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var e=Lr.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,i=Dt.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var o,a,u=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===Dn)o=Dn;else{if("rw"!=e&&e!=In)throw new rt.InvalidArgument("Invalid transaction mode: "+e);o=In}if(i){if(i.mode===Dn&&o===In){if(!u)throw new rt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!u)throw new rt.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),u&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,(function(t,n){n(e)})):_n(e)}var s=Ur.bind(null,this,o,a,i,n);return i?i._promise(o,s,"lock"):Dt.trans?pn(Dt.transless,(function(){return r._whenReady(s)})):this._whenReady(s)},e.prototype.table=function(e){if(!he(this._allTables,e))throw new rt.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},e}(),ui="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",si=function(){function e(e){this._subscribe=e}return e.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},e.prototype[ui]=function(){return this},e}();function ci(e,t){return ue(t).forEach((function(n){ei(e[n]||(e[n]=new Jr),t[n])})),e}function li(e){return new si((function(t){var n=qe(e);var r=!1,i={},o={},a={get closed(){return r},unsubscribe:function(){r=!0,hr.storagemutated.unsubscribe(l)}};t.start&&t.start(a);var u=!1,s=!1;function c(){return ue(o).some((function(e){return i[e]&&function(e,t){var n=ti(t),r=n.next();if(r.done)return!1;for(var i=r.value,o=ti(e),a=o.next(i.from),u=a.value;!r.done&&!a.done;){if(Hn(u.from,i.to)<=0&&Hn(u.to,i.from)>=0)return!0;Hn(i.from,u.from)<0?i=(r=n.next(u.from)).value:u=(a=o.next(i.from)).value}return!1}(i[e],o[e])}))}var l=function(e){ci(i,e),c()&&f()},f=function(){if(!u&&!r){i={};var h={},d=function(t){n&&un();var r=function(){return an(e,{subscr:t,trans:null})},i=Dt.trans?pn(Dt.transless,r):r();return n&&i.then(sn,sn),i}(h);s||(hr(lr,l),s=!0),u=!0,Promise.resolve(d).then((function(e){u=!1,r||(c()?f():(i={},o=h,t.next&&t.next(e)))}),(function(e){u=!1,t.error&&t.error(e),a.unsubscribe()}))}};return f(),a}))}try{oi={indexedDB:ae.indexedDB||ae.mozIndexedDB||ae.webkitIndexedDB||ae.msIndexedDB,IDBKeyRange:ae.IDBKeyRange||ae.webkitIDBKeyRange}}catch(e){oi={indexedDB:null,IDBKeyRange:null}}var fi=ai;function hi(e){var t=di;try{di=!0,hr.storagemutated.fire(e)}finally{di=t}}de(fi,ie(ie({},ot),{delete:function(e){return new fi(e,{addons:[]}).delete()},exists:function(e){return new fi(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return function(e){var t=e.indexedDB,n=e.IDBKeyRange;return Rr(t)?Promise.resolve(t.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==Tn}))})):Br(t,n).toCollection().primaryKeys()}(fi.dependencies).then(e)}catch(e){return _n(new rt.MissingAPI)}},defineClass:function(){return function(e){ce(this,e)}},ignoreTransaction:function(e){return Dt.trans?pn(Dt.transless,e):e()},vip:Fr,async:function(e){return function(){try{var t=qr(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Mt.resolve(t)}catch(e){return _n(e)}}},spawn:function(e,t,n){try{var r=qr(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Mt.resolve(r)}catch(e){return _n(e)}},currentTransaction:{get:function(){return Dt.trans||null}},waitFor:function(e,t){var n=Mt.resolve("function"==typeof e?fi.ignoreTransaction(e):e).timeout(t||6e4);return Dt.trans?Dt.trans.waitFor(n):n},Promise:Mt,debug:{get:function(){return Le},set:function(e){Ue(e,"dexie"===e?function(){return!0}:jn)}},derive:ve,extend:ce,props:de,override:we,Events:Nn,on:hr,liveQuery:li,extendObservabilitySet:ci,getByKeyPath:Pe,setByKeyPath:Oe,delByKeyPath:function(e,t){"string"==typeof t?Oe(e,t,void 0):"length"in t&&[].map.call(t,(function(t){Oe(e,t,void 0)}))},shallowClone:Ke,deepClone:De,getObjectDiff:zr,cmp:Hn,asap:ke,minKey:En,addons:[],connections:Kn,errnames:tt,dependencies:oi,semVer:xn,version:xn.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)}))})),fi.maxKey=mr(fi.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(hr(lr,(function(e){var t;di||(Sn?(t=document.createEvent("CustomEvent")).initCustomEvent(fr,!0,!0,e):t=new CustomEvent(fr,{detail:e}),di=!0,dispatchEvent(t),di=!1)})),addEventListener(fr,(function(e){var t=e.detail;di||hi(t)})));var di=!1;if("undefined"!=typeof BroadcastChannel){var pi=new BroadcastChannel(fr);hr(lr,(function(e){di||pi.postMessage(e)})),pi.onmessage=function(e){e.data&&hi(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){hr(lr,(function(e){try{di||("undefined"!=typeof localStorage&&localStorage.setItem(fr,JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&oe([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach((function(t){return t.postMessage({type:fr,changedParts:e})})))}catch(e){}})),addEventListener("storage",(function(e){if(e.key===fr){var t=JSON.parse(e.newValue);t&&hi(t.changedParts)}}));var yi=self.document&&navigator.serviceWorker;yi&&yi.addEventListener("message",(function(e){var t=e.data;t&&t.type===fr&&hi(t.changedParts)}))}Mt.rejectionMapper=function(e,t){if(!e||e instanceof Xe||e instanceof TypeError||e instanceof SyntaxError||!e.name||!it[e.name])return e;var n=new it[e.name](t||e.message,e);return"stack"in e&&ye(n,"stack",{get:function(){return this.inner.stack}}),n},Ue(Le,jn);const vi=new class extends ai{constructor(){super("tasks"),this.version(2).stores({tasks:"++id, name, domain, status"})}};function mi(e){const t=e-1;return t*t*t+1}function gi(e,t,n){const r=getComputedStyle(e),i="none"===r.transform?"":r.transform,a=t.from.width/e.clientWidth,u=t.from.height/e.clientHeight,s=(t.from.left-t.to.left)/a,c=(t.from.top-t.to.top)/u,l=Math.sqrt(s*s+c*c),{delay:f=0,duration:h=(e=>120*Math.sqrt(e)),easing:d=mi}=n;return{delay:f,duration:o(h)?h(l):h,easing:d,css:(e,t)=>`transform: ${i} translate(${t*s}px, ${t*c}px);`}}function bi(e,{delay:n=0,duration:r=400,easing:i=t}){const o=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:i,css:e=>"opacity: "+e*o}}function _i(e,{delay:t=0,duration:n=400,easing:r=mi,x:i=0,y:o=0,opacity:a=0}){const u=getComputedStyle(e),s=+u.opacity,c="none"===u.transform?"":u.transform,l=s*(1-a);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*i}px, ${(1-e)*o}px);\n\t\t\topacity: ${s-l*t}`}}function wi(e,t,n){const r=e.slice();return r[11]=t[n],r}function xi(e){let t,n,r=[],i=new Map,o=e[3];const a=e=>e[11].id;for(let t=0;t<o.length;t+=1){let n=wi(e,o,t),u=a(n);i.set(u,r[t]=Ei(u,n))}return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=g("")},m(e,i){for(let t=0;t<r.length;t+=1)r[t].m(e,i);y(e,t,i),n=!0},p(e,n){if(72&n){const o=e[3];Y();for(let e=0;e<r.length;e+=1)r[e].r();r=function(e,t,n,r,i,o,a,u,s,c,l,f){let h=e.length,d=o.length,p=h;const y={};for(;p--;)y[e[p].key]=p;const v=[],m=new Map,g=new Map;for(p=d;p--;){const e=f(i,o,p),u=n(e);let s=a.get(u);s?r&&s.p(e,t):(s=c(u,e),s.c()),m.set(u,v[p]=s),u in y&&g.set(u,Math.abs(p-y[u]))}const b=new Set,_=new Set;function w(e){G(e,1),e.m(u,l),a.set(e.key,e),l=e.first,d--}for(;h&&d;){const t=v[d-1],n=e[h-1],r=t.key,i=n.key;t===n?(l=t.first,h--,d--):m.has(i)?!a.has(r)||b.has(r)?w(t):_.has(i)?h--:g.get(r)>g.get(i)?(_.add(r),w(t)):(b.add(i),h--):(s(n,a),h--)}for(;h--;){const t=e[h];m.has(t.key)||s(t,a)}for(;d;)w(v[d-1]);return v}(r,n,a,1,e,o,i,t.parentNode,J,Ei,t,wi);for(let e=0;e<r.length;e+=1)r[e].a();H()}},i(e){if(!n){for(let e=0;e<o.length;e+=1)G(r[e]);n=!0}},o(e){for(let e=0;e<r.length;e+=1)Q(r[e]);n=!1},d(e){for(let t=0;t<r.length;t+=1)r[t].d(e);e&&v(t)}}}function ki(e){let t,n,r;return{c(){t=m("a"),n=m("span"),n.innerHTML='<i class="fas fa-link"></i>',x(n,"class","icon is-left TodoInputText"),x(t,"href",r=e[11].link),x(t,"target","_blank"),x(t,"class","link")},m(e,r){y(e,t,r),p(t,n)},p(e,n){8&n&&r!==(r=e[11].link)&&x(t,"href",r)},d(e){e&&v(t)}}}function Ei(n,r){let a,u,s,l,f,h,w,k,E,P,O,A,j,T=r[11].name+"",D=e;function I(...e){return r[10](r[11],...e)}let B="https://"!==r[11].link&&ki(r);return{key:n,first:null,c(){a=m("div"),u=m("input"),s=b(),l=m("span"),B&&B.c(),f=b(),h=g(T),w=b(),x(u,"type","checkbox"),x(l,"class","title is-3"),x(a,"class","panel-block TodoItem"),this.first=a},m(e,t){y(e,a,t),p(a,u),p(a,s),p(a,l),B&&B.m(l,null),p(l,f),p(l,h),p(a,w),O=!0,A||(j=_(u,"click",I),A=!0)},p(e,t){"https://"!==(r=e)[11].link?B?B.p(r,t):(B=ki(r),B.c(),B.m(l,f)):B&&(B.d(1),B=null),(!O||8&t)&&T!==(T=r[11].name+"")&&function(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}(h,T)},r(){P=a.getBoundingClientRect()},f(){!function(e){const t=getComputedStyle(e);if("absolute"!==t.position&&"fixed"!==t.position){const{width:n,height:r}=t,i=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=r,C(e,i)}}(a),D(),C(a,P)},a(){D(),D=function(n,r,i,o){if(!r)return e;const a=n.getBoundingClientRect();if(r.left===a.left&&r.right===a.right&&r.top===a.top&&r.bottom===a.bottom)return e;const{delay:u=0,duration:s=300,easing:l=t,start:f=c()+u,end:h=f+s,tick:p=e,css:y}=i(n,{from:r,to:a},o);let v,m=!0,g=!1;function b(){y&&S(n,v),m=!1}return d((e=>{if(!g&&e>=f&&(g=!0),g&&e>=h&&(p(1,0),b()),!m)return!1;if(g){const t=0+1*l((e-f)/s);p(t,1-t)}return!0})),y&&(v=K(n,0,1,s,u,l,y)),u||(g=!0),p(0,1),b}(a,P,gi,{})},i(n){O||(M((()=>{E&&E.end(1),k||(k=function(n,r,i){let a,u,s=r(n,i),l=!1,f=0;function h(){a&&S(n,a)}function p(){const{delay:r=0,duration:i=300,easing:o=t,tick:p=e,css:y}=s||X;y&&(a=K(n,0,1,i,r,o,y,f++)),p(0,1);const v=c()+r,m=v+i;u&&u.abort(),l=!0,M((()=>V(n,!0,"start"))),u=d((e=>{if(l){if(e>=m)return p(1,0),V(n,!0,"end"),h(),l=!1;if(e>=v){const t=o((e-v)/i);p(t,1-t)}}return l}))}let y=!1;return{start(){y||(S(n),o(s)?(s=s(),U().then(p)):p())},invalidate(){y=!1},end(){l&&(h(),l=!1)}}}(a,bi,{})),k.start()})),O=!0)},o(n){k&&k.invalidate(),E=function(n,r,a){let u,s=r(n,a),l=!0;const f=z;function h(){const{delay:r=0,duration:o=300,easing:a=t,tick:h=e,css:p}=s||X;p&&(u=K(n,1,0,o,r,a,p));const y=c()+r,v=y+o;M((()=>V(n,!1,"start"))),d((e=>{if(l){if(e>=v)return h(0,1),V(n,!1,"end"),--f.r||i(f.c),!1;if(e>=y){const t=a((e-y)/o);h(1-t,t)}}return l}))}return f.r+=1,o(s)?U().then((()=>{s=s(),h()})):h(),{end(e){e&&s.tick&&s.tick(1,0),l&&(u&&S(n,u),l=!1)}}}(a,_i,{x:100}),O=!1},d(e){e&&v(a),B&&B.d(),e&&E&&E.end(),A=!1,j()}}}function Pi(e){let t,n,r,o,a,u,s,c,l,f,h,d,g,E,P,O=e[3]&&xi(e);return{c(){t=m("div"),n=m("p"),n.textContent="BL:TODO",r=b(),o=m("div"),a=m("form"),u=m("input"),s=b(),c=m("form"),l=m("input"),f=b(),h=m("div"),h.innerHTML='<p class="control has-icons-left"><input class="input TodoInput TodoInputText" type="text" placeholder="Search"/> \n      <span class="icon is-left TodoInputText"><i class="fas fa-search" aria-hidden="true"></i></span></p>',d=b(),O&&O.c(),x(n,"class","panel-heading TodoAppTitle"),x(u,"class","input title is-5 TodoInput TodoInputText"),x(u,"type","text"),x(u,"placeholder","New Task"),x(a,"class","control"),x(l,"type","text"),x(l,"class","input title is-5 TodoInput TodoInputText"),x(l,"placeholder","Task Link"),x(c,"class","control"),x(o,"class","panel-block"),x(h,"class","panel-block"),x(t,"class","container panel is-dark TodoApp")},m(i,v){y(i,t,v),p(t,n),p(t,r),p(t,o),p(o,a),p(a,u),k(u,e[0]),e[8](u),p(o,s),p(o,c),p(c,l),k(l,e[1]),p(t,f),p(t,h),p(t,d),O&&O.m(t,null),g=!0,E||(P=[_(u,"input",e[7]),_(a,"submit",w(e[5])),_(l,"input",e[9]),_(l,"submit",e[5]),_(c,"submit",w(e[5]))],E=!0)},p(e,[n]){1&n&&u.value!==e[0]&&k(u,e[0]),2&n&&l.value!==e[1]&&k(l,e[1]),e[3]?O?(O.p(e,n),8&n&&G(O,1)):(O=xi(e),O.c(),G(O,1),O.m(t,null)):O&&(Y(),Q(O,1,1,(()=>{O=null})),H())},i(e){g||(G(O),g=!0)},o(e){Q(O),g=!1},d(n){n&&v(t),e[8](null),O&&O.d(),E=!1,i(P)}}}function Oi(e,t,n){let r,i,o=li((()=>vi.tasks.where("status").equals("TODO").toArray()));u(e,o,(e=>n(3,r=e)));let a,s="https://";const c=e=>{vi.tasks.update(e,{status:"DONE"})};return[i,s,a,r,o,()=>{vi.tasks.add({name:i,domain:"*",link:s,status:"TODO",dateAdded:new Date(Date.now())}),n(0,i=""),n(1,s="https://"),a.focus()},c,function(){i=this.value,n(0,i)},function(e){T[e?"unshift":"push"]((()=>{a=e,n(2,a)}))},function(){s=this.value,n(1,s)},e=>c(e)]}class Ki extends re{constructor(e){super(),ne(this,e,Oi,Pi,a,{})}}function Si(t){let n,r,i,o;return i=new Ki({}),{c(){var e;n=m("main"),r=m("section"),(e=i.$$.fragment)&&e.c(),x(r,"id","mainpanel"),x(r,"class","hero is-fullheight"),x(n,"id","mainpanel"),x(n,"class","is-widescreen")},m(e,t){y(e,n,t),p(n,r),Z(i,r,null),o=!0},p:e,i(e){o||(G(i.$$.fragment,e),o=!0)},o(e){Q(i.$$.fragment,e),o=!1},d(e){e&&v(n),ee(i)}}}return new class extends re{constructor(e){super(),ne(this,e,null,Si,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
